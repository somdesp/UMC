
<div class="col-md-12 content-page" ng-controller="topicoSelecionadoCtrl">
    <div class="col-md-12 blog-post">
        <script>
            var Topico = { Id:@ViewBag.TopicoId}

            localStorage.setItem('IdTopico', JSON.stringify(Topico.Id));

        </script>



        <div class="well well-sm" style="background-color: #d7ffef">
            <div class="post-title">
                <h1>{{TopicosSelc.Titulo}}</h1>
            </div>
            <div class="media">
                <div class="media-left">
                    <img src="~/Upload/{{TopicosSelc.usuario.UploadArquivo.Caminho}}" class="media-object" style="width: 60px">
                </div>
                <div class="media-body">
                    <h4 class="media-heading"><a href="#" target="_blank"> {{TopicosSelc.usuario.Nome}} </a><small>{{TopicosSelc.DataCria}}</small></h4>

                    <p>{{TopicosSelc.Descricao}}</p>
                    <div ng-if="(TopicosSelc.usuario.Id!==usuario.Id)">
                        <div ng-if="(usuID>0)">

                            <div ng-controller="avaliacao.controller">

                                <span class="badge label-danger label-danger animate-show-hide" ng-show="verificarmedia">{{contarDesLike}}</span>
                                <button ng-model="TopicosSelc.avaliacao.pontos" ng-click="valorpegoDeslike(TopicosSelc,usuario)"><i class="far fa-thumbs-down padrao-curti color-6" ng-class="{'fas':TopicosSelc.avaliacao.pontos===-1}"></i></button>

                                <button ng-model="TopicosSelc.avaliacao.pontos" ng-click="valorpegoLike(TopicosSelc,usuario)"><i class="far fa-thumbs-up  padrao-curti color-6" ng-class="{'fas':TopicosSelc.avaliacao.pontos===1}"></i></button>
                                <span class="badge label-success label-success animate-show-hide" ng-show="verificarmedia">{{contarLike}}</span>

                                <input type="hidden" ng-model="TopicosSelc.id" value="@ViewBag.TopicoId" />
                                <input type="hidden" ng-model="idAvaliacaoLike" value="{{idAvaliacaoLike}}" />
                            </div>
                        </div>


                    </div>

                </div>
            </div>
        </div>

        <div ng-repeat="topico in TopicosSelc.Resposta">

            <div class="well well-sm">
                <div class="media">
                    <div class="media-body">
                        <h4 class="media-heading "><a href="#" target="_blank">{{topico.usuario.Nome}} </a><small> {{topico.DataCria}}</small></h4>
                        <p>{{topico.Descricao}}</p>

                    </div>

                    <div class="media-right">
                        <img src="~/Upload/{{topico.usuario.UploadArquivo.Caminho}}" class="media-object" style="width:60px">
                    </div>
                    <div ng-if="(topico.usuario.Id!== usuario.Id)">
                        <div ng-if="(usuID>0)">

                            <div ng-controller="avaliacao.controller">

                                <div uib-tooltip="{{dicas}}" tooltip-placement="bottom-left">

                                    <jk-rating-stars max-rating="5" style="user-select: none;" rating="ctrl.rating" ng-init="ctrl.rating = topico.avaliacao.mediaPontos" read-only="(ctrl.rating>0)" ng-class="{'classebloqueio': ctrl.readOnly }" ng-click="valorClick(ctrl.rating,topico,usuario,TopicosSelc)">

                                    </jk-rating-stars>


                                    <div class="row">
                                        <div class="col-md-12">

                                            <input type="hidden" ng-init="nota=topico.avaliacao.pontos" />
                                            <span class="color-6 animate-if" ng-if="nota>0">Sua Nota é {{nota}}.</span>
                                            <input type="hidden" ng-model="idAvaliacao" value="{{idAvaliacao}}" />
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>



                    </div>

                </div>
            </div>
        </div>

        <div class="subscribe-form margin-top-20">
            <div ng-if="(TopicosSelc.Status.Id !=2)">
                <form id="fileupload" action="https://jquery-file-upload.appspot.com/" method="POST" enctype="multipart/form-data" data-ng-controller="DemoFileUploadController" data-file-upload="options" data-ng-class="{'fileupload-processing': processing() || loadingFiles}">
                    <!-- Redirect browsers with JavaScript disabled to the origin page -->
                    <noscript><input type="hidden" name="redirect" value="https://blueimp.github.io/jQuery-File-Upload/"></noscript>
                    <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
                    <div class="row fileupload-buttonbar">
                        <div class="col-lg-7">
                            <!-- The fileinput-button span is used to style the file input field as button -->
                            <span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}">
                                <i class="glyphicon glyphicon-plus"></i>
                                <span>Add files...</span>
                                <input type="file" name="files[]" multiple ng-disabled="disabled">
                            </span>
                            <button type="button" class="btn btn-primary start" data-ng-click="submit()">
                                <i class="glyphicon glyphicon-upload"></i>
                                <span>Start upload</span>
                            </button>
                            <button type="button" class="btn btn-warning cancel" data-ng-click="cancel()">
                                <i class="glyphicon glyphicon-ban-circle"></i>
                                <span>Cancel upload</span>
                            </button>
                            <!-- The global file processing state -->
                            <span class="fileupload-process"></span>
                        </div>
                        <!-- The global progress state -->
                        <div class="col-lg-5 fade" data-ng-class="{in: active()}">
                            <!-- The global progress bar -->
                            <div class="progress progress-striped active" data-file-upload-progress="progress()"><div class="progress-bar progress-bar-success" data-ng-style="{width: num + '%'}"></div></div>
                            <!-- The extended global progress state -->
                            <div class="progress-extended">&nbsp;</div>
                        </div>
                    </div>
                    <!-- The table listing the files available for upload/download -->
                    <table class="table table-striped files ng-cloak">
                        <tr data-ng-repeat="file in queue" data-ng-class="{'processing': file.$processing()}">
                            <td data-ng-switch data-on="!!file.thumbnailUrl">
                                <div class="preview" data-ng-switch-when="true">
                                    <a data-ng-href="{{file.url}}" title="{{file.name}}" download="{{file.name}}" data-gallery><img data-ng-src="{{file.thumbnailUrl}}" alt=""></a>
                                </div>
                                <div class="preview" data-ng-switch-default data-file-upload-preview="file"></div>
                            </td>
                            <td>
                                <p class="name" data-ng-switch data-on="!!file.url">
                                    <span data-ng-switch-when="true" data-ng-switch data-on="!!file.thumbnailUrl">
                                        <a data-ng-switch-when="true" data-ng-href="{{file.url}}" title="{{file.name}}" download="{{file.name}}" data-gallery>{{file.name}}</a>
                                        <a data-ng-switch-default data-ng-href="{{file.url}}" title="{{file.name}}" download="{{file.name}}">{{file.name}}</a>
                                    </span>
                                    <span data-ng-switch-default>{{file.name}}</span>
                                </p>
                                <strong data-ng-show="file.error" class="error text-danger">{{file.error}}</strong>
                            </td>
                            <td>
                                <p class="size">{{file.size | formatFileSize}}</p>
                                <div class="progress progress-striped active fade" data-ng-class="{pending: 'in'}[file.$state()]" data-file-upload-progress="file.$progress()"><div class="progress-bar progress-bar-success" data-ng-style="{width: num + '%'}"></div></div>
                            </td>
                            <td>
                                <button type="button" class="btn btn-primary start" data-ng-click="file.$submit()" data-ng-hide="!file.$submit || options.autoUpload" data-ng-disabled="file.$state() == 'pending' || file.$state() == 'rejected'">
                                    <i class="glyphicon glyphicon-upload"></i>
                                    <span>Start</span>
                                </button>
                                <button type="button" class="btn btn-warning cancel" data-ng-click="file.$cancel()" data-ng-hide="!file.$cancel">
                                    <i class="glyphicon glyphicon-ban-circle"></i>
                                    <span>Cancel</span>
                                </button>
                                <button data-ng-controller="FileDestroyController" type="button" class="btn btn-danger destroy" data-ng-click="file.$destroy()" data-ng-hide="!file.$destroy">
                                    <i class="glyphicon glyphicon-trash"></i>
                                    <span>Delete</span>
                                </button>
                            </td>
                        </tr>
                    </table>
                </form>

                <form name="resposta">
                    <div class="form-group">
                        <label for="comment">Resposta:</label>
                        <textarea class="form-control" ng-model="areaResposta" rows="10" cols="60" id="areaResposta" required /></textarea>
                    </div>
                    <button class="submit-btn" type="submit" ng-click="novoPost(areaResposta)" ng-disabled="resposta.$invalid">
                        <h1>Enviar</h1>
                    </button>
                </form>
            </div>
        </div>
    </div>



</div>

